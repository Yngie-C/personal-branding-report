/**
 * ì „ì²´ ì›Œí¬í”Œë¡œìš° ìë™ í…ŒìŠ¤íŠ¸
 * resume_sample.docxë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ì‹ ë¦¬í¬íŠ¸ê¹Œì§€ ìƒì„±
 */
import * as dotenv from 'dotenv';
import * as fs from 'fs';
import * as path from 'path';
import FormData from 'form-data';
import fetch from 'node-fetch';

dotenv.config({ path: '.env.local' });

const BASE_URL = 'http://localhost:3000';
const TEST_EMAIL = `test-${Date.now()}@example.com`;

// PSA ì„¤ë¬¸ ë‹µë³€ (60ê°œ, 1-7 ì ìˆ˜)
const generatePSAAnswers = () => {
  const answers: Record<string, number> = {};

  // ê· í˜•ì¡íŒ ë‹µë³€ ìƒì„± (executionê³¼ innovationì´ ë†’ê²Œ)
  for (let i = 1; i <= 60; i++) {
    const category = Math.floor((i - 1) / 12); // 0-4 (5ê°œ ì¹´í…Œê³ ë¦¬)

    if (category === 0) { // í˜ì‹  ì‚¬ê³ 
      answers[`question_${i}`] = 5 + Math.floor(Math.random() * 2); // 5-6
    } else if (category === 1) { // ì² ì € ì‹¤í–‰
      answers[`question_${i}`] = 6 + Math.floor(Math.random() * 2); // 6-7 (ê°€ì¥ ë†’ìŒ)
    } else if (category === 2) { // ëŒ€ì¸ ì˜í–¥
      answers[`question_${i}`] = 4 + Math.floor(Math.random() * 2); // 4-5
    } else if (category === 3) { // í˜‘ì—… ê³µê°
      answers[`question_${i}`] = 5 + Math.floor(Math.random() * 2); // 5-6
    } else { // ìƒí™© íšŒë³µ
      answers[`question_${i}`] = 4 + Math.floor(Math.random() * 2); // 4-5
    }
  }

  return answers;
};

// Enhanced Questions ë‹µë³€ (500ì ì´ìƒ)
const enhancedQuestions = {
  "soul_1": `ì œê°€ ê°€ì¥ ì—ë„ˆì§€ë¥¼ ëŠê¼ˆë˜ ìˆœê°„ì€ ì‹ ê·œ í”„ë¡œë•íŠ¸ ê°œë°œ í”„ë¡œì íŠ¸ë¥¼ ì²˜ìŒë¶€í„° ëê¹Œì§€ ë¦¬ë“œí–ˆì„ ë•Œì…ë‹ˆë‹¤. íŒ€ì›ë“¤ê³¼ í•¨ê»˜ ì‚¬ìš©ì ë¦¬ì„œì¹˜ë¥¼ ì§„í–‰í•˜ë©° ì§„ì§œ ë¬¸ì œë¥¼ ë°œê²¬í•˜ê³ , ê·¸ê²ƒì„ í•´ê²°í•˜ê¸° ìœ„í•œ ì•„ì´ë””ì–´ë¥¼ ë¸Œë ˆì¸ìŠ¤í† ë°í•˜ë©° êµ¬ì²´í™”í•˜ëŠ” ê³¼ì •ì´ ì •ë§ ì§œë¦¿í–ˆìŠµë‹ˆë‹¤. íŠ¹íˆ ì²« í”„ë¡œí† íƒ€ì…ì„ ë§Œë“¤ì–´ ì‹¤ì œ ì‚¬ìš©ìë“¤ì—ê²Œ í…ŒìŠ¤íŠ¸í–ˆì„ ë•Œ, "ì´ê±° ì •ë§ í•„ìš”í–ˆì–´ìš”!"ë¼ëŠ” í”¼ë“œë°±ì„ ë“¤ì—ˆì„ ë•Œì˜ ì„±ì·¨ê°ì€ ë§ë¡œ í‘œí˜„í•  ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤. ê·¸ í›„ 6ê°œì›”ê°„ ê°œë°œí•˜ê³  ê°œì„ í•˜ì—¬ ì •ì‹ ì¶œì‹œí–ˆì„ ë•Œ ì²« ì£¼ì— 5ì²œëª…ì´ ê°€ì…í–ˆê³ , ê¸ì •ì ì¸ ë¦¬ë·°ë“¤ì´ ìŸì•„ì¡ŒìŠµë‹ˆë‹¤. ë°ì´í„°ë¥¼ ë³´ë©° ê°€ì„¤ì„ ê²€ì¦í•˜ê³ , ì‚¬ìš©ì í”¼ë“œë°±ì„ ë°˜ì˜í•˜ì—¬ ì œí’ˆì„ ì§„í™”ì‹œí‚¤ëŠ” ì „ ê³¼ì •ì—ì„œ ì €ëŠ” ì‚´ì•„ìˆìŒì„ ëŠê¼ˆìŠµë‹ˆë‹¤. ì´ëŸ° ê²½í—˜ì´ ì œê°€ í”„ë¡œë•íŠ¸ ë§¤ë‹ˆì €ë¡œì„œì˜ ê¸¸ì„ ê³„ì† ê°€ê²Œ ë§Œë“  ì›ë™ë ¥ì…ë‹ˆë‹¤.`,

  "soul_2": `ê°€ì¥ í˜ë“¤ì—ˆì§€ë§Œ ì œ ê°€ì¹˜ê´€ì„ ì§€ì¼°ë˜ ìˆœê°„ì€ ìŠ¤íƒ€íŠ¸ì—… ì´ˆê¸°ì— íˆ¬ì ìœ ì¹˜ë¥¼ ìœ„í•´ ë¹ ë¥¸ ì„±ì¥ ìˆ˜ì¹˜ê°€ í•„ìš”í–ˆë˜ ë•Œì…ë‹ˆë‹¤. ê²½ì˜ì§„ì€ ë‹¨ê¸° ìˆ˜ìµì„ ìœ„í•´ ì‚¬ìš©ì ê²½í—˜ì„ í•´ì¹˜ëŠ” ê´‘ê³  ëª¨ë¸ì„ ë„ì…í•˜ìê³  ì œì•ˆí–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì €ëŠ” "ì¥ê¸°ì ìœ¼ë¡œ ì‚¬ìš©ì ì‹ ë¢°ë¥¼ ìƒìœ¼ë©´ ì œí’ˆì˜ ë¯¸ë˜ê°€ ì—†ë‹¤"ê³  ì„¤ë“í–ˆìŠµë‹ˆë‹¤. 3ì£¼ê°„ì˜ ì¹˜ì—´í•œ ë…¼ìŸ ëì—, ì €ëŠ” ëŒ€ì•ˆìœ¼ë¡œ í”„ë¦¬ë¯¸ì—„ êµ¬ë… ëª¨ë¸ì„ ì œì•ˆí–ˆê³ , ë¹ ë¥´ê²Œ MVPë¥¼ ë§Œë“¤ì–´ í…ŒìŠ¤íŠ¸í–ˆìŠµë‹ˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ ì¶œì‹œ 2ê°œì›” ë§Œì— ì „ì²´ ì‚¬ìš©ìì˜ 8%ê°€ ìœ ë£Œ ì „í™˜í–ˆê³ , ì´ê²ƒì´ ì§€ì† ê°€ëŠ¥í•œ ìˆ˜ìµ ëª¨ë¸ì´ ë˜ì—ˆìŠµë‹ˆë‹¤. ë¹„ë¡ 2ì£¼ ì¼ì •ì´ ì§€ì—°ë˜ê³  íŒ€ ë‚´ ê°ˆë“±ë„ ìˆì—ˆì§€ë§Œ, ì‚¬ìš©ì ì¤‘ì‹¬ì˜ ì² í•™ì„ ì§€í‚¨ ê²ƒì´ ê²°êµ­ íšŒì‚¬ë¥¼ ë” ê±´ê°•í•˜ê²Œ ë§Œë“¤ì—ˆë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. ì´ ê²½í—˜ì€ ì €ì—ê²Œ 'ë¹ ë¥¸ ê²ƒë³´ë‹¤ ì˜³ì€ ê²ƒ'ì´ ë” ì¤‘ìš”í•˜ë‹¤ëŠ” êµí›ˆì„ ì£¼ì—ˆìŠµë‹ˆë‹¤.`,

  "soul_3": `ì œ ì¸ìƒì˜ ì „í™˜ì ì€ ëŒ€í•™êµ 3í•™ë…„ ë•Œ ìš°ì—°íˆ ì°¸ì—¬í•œ í•´ì»¤í†¤ì´ì—ˆìŠµë‹ˆë‹¤. ì €ëŠ” ê²½ì˜í•™ì„ ì „ê³µí–ˆì§€ë§Œ, ê°œë°œìë“¤ê³¼ ë””ìì´ë„ˆë“¤ì´ ë°¤ìƒˆ í˜‘ì—…í•˜ë©° ì•„ì´ë””ì–´ë¥¼ í˜„ì‹¤ë¡œ ë§Œë“œëŠ” ëª¨ìŠµì„ ë³´ê³  í° ì¶©ê²©ì„ ë°›ì•˜ìŠµë‹ˆë‹¤. ê·¸ë•Œ ì²˜ìŒìœ¼ë¡œ "ë‚˜ë„ ì´ëŸ° ì¼ì„ í•˜ê³  ì‹¶ë‹¤"ëŠ” í™•ì‹ ì´ ë“¤ì—ˆê³ , ê·¸ ì£¼ë§ ë™ì•ˆ íŒ€ì˜ PM ì—­í• ì„ ë§¡ì•„ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì •ë¦¬í•˜ê³  ìš°ì„ ìˆœìœ„ë¥¼ ì •í•˜ëŠ” ì¼ì„ í–ˆìŠµë‹ˆë‹¤. ë¹„ë¡ ìš°ë¦¬ íŒ€ì€ ìˆ˜ìƒí•˜ì§€ ëª»í–ˆì§€ë§Œ, ì €ëŠ” ê·¸ ê²½í—˜ì„ í†µí•´ ì œê°€ ì •ë§ ì˜í•˜ê³  ì¢‹ì•„í•˜ëŠ” ì¼ì´ ë¬´ì—‡ì¸ì§€ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. ê·¸ í›„ ë…í•™ìœ¼ë¡œ í”„ë¡œë•íŠ¸ ë§¤ë‹ˆì§€ë¨¼íŠ¸ë¥¼ ê³µë¶€í•˜ê¸° ì‹œì‘í–ˆê³ , ìŠ¤íƒ€íŠ¸ì—… ì¸í„´ì„ ì§€ì›í•˜ì—¬ ì‹¤ë¬´ ê²½í—˜ì„ ìŒ“ì•˜ìŠµë‹ˆë‹¤. ì§€ê¸ˆ ëŒì´ì¼œë³´ë©´ ê·¸ í•´ì»¤í†¤ì´ ì—†ì—ˆë‹¤ë©´ ì§€ê¸ˆì˜ ì œ ì»¤ë¦¬ì–´ëŠ” ì „í˜€ ë‹¤ë¥¸ ë°©í–¥ìœ¼ë¡œ í˜ëŸ¬ê°”ì„ ê²ƒì…ë‹ˆë‹¤.`,

  "expertise_1": `ì œê°€ ê°€ì¥ ìë‘ìŠ¤ëŸ½ê²Œ ìƒê°í•˜ëŠ” í”„ë¡œì íŠ¸ëŠ” B2B SaaS ëŒ€ì‹œë³´ë“œì˜ ì „ë©´ ë¦¬ë‰´ì–¼ì…ë‹ˆë‹¤. ê¸°ì¡´ ì œí’ˆì€ ê¸°ëŠ¥ì€ ë§ì•˜ì§€ë§Œ ì‚¬ìš©ì„±ì´ ë–¨ì–´ì ¸ ê³ ê° ë§Œì¡±ë„ê°€ ë‚®ì•˜ê³ , ì´íƒˆë¥ ì´ ë†’ì•˜ìŠµë‹ˆë‹¤. ì €ëŠ” ë¨¼ì € 3ê°œì›”ê°„ 20ëª… ì´ìƒì˜ ê³ ê°ì„ ì¸í„°ë·°í•˜ë©° í˜ì¸ í¬ì¸íŠ¸ë¥¼ ê¹Šì´ íŒŒì•…í–ˆìŠµë‹ˆë‹¤. ê·¸ ê²°ê³¼ "ë°ì´í„°ëŠ” ë§ì€ë° ì¸ì‚¬ì´íŠ¸ë¥¼ ì–»ê¸° ì–´ë µë‹¤"ëŠ” í•µì‹¬ ë¬¸ì œë¥¼ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ AI ê¸°ë°˜ ì¸ì‚¬ì´íŠ¸ ì¶”ì²œ ê¸°ëŠ¥ê³¼ ì§ê´€ì ì¸ ì‹œê°í™” ì‹œìŠ¤í…œì„ ì„¤ê³„í–ˆê³ , 6ê°œì›”ê°„ ê°œë°œíŒ€ 8ëª…, ë””ìì´ë„ˆ 3ëª…ê³¼ í˜‘ì—…í•˜ì—¬ ì™„ì „íˆ ìƒˆë¡œìš´ ì œí’ˆì„ ë§Œë“¤ì–´ëƒˆìŠµë‹ˆë‹¤. ì¶œì‹œ í›„ ê³ ê° ë§Œì¡±ë„(NPS)ê°€ 30ì ì—ì„œ 65ì ìœ¼ë¡œ ìƒìŠ¹í–ˆê³ , ì›”ê°„ í™œì„± ì‚¬ìš©ìëŠ” 10ë§Œì—ì„œ 30ë§Œìœ¼ë¡œ 3ë°° ì¦ê°€í–ˆìŠµë‹ˆë‹¤. ê°€ì¥ ë¿Œë“¯í–ˆë˜ ìˆœê°„ì€ í•œ ê³ ê°ì´ "ì´ì œ ìš°ë¦¬ íŒ€ì˜ ì—…ë¬´ ë°©ì‹ì´ ì™„ì „íˆ ë°”ë€Œì—ˆì–´ìš”"ë¼ê³  ë§í–ˆì„ ë•Œì˜€ìŠµë‹ˆë‹¤. ì´ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ ì§„ì§œ ì‚¬ìš©ì ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê²ƒì´ ì–¼ë§ˆë‚˜ í° ì„íŒ©íŠ¸ë¥¼ ë§Œë“œëŠ”ì§€ ì²´ê°í–ˆìŠµë‹ˆë‹¤.`,

  "expertise_2": `ì œê°€ íŒ€ì— ê¸°ì—¬í•œ ë³´ì´ì§€ ì•ŠëŠ” ì¼ ì¤‘ ê°€ì¥ ì˜ë¯¸ ìˆì—ˆë˜ ê²ƒì€ ë°ì´í„° ê¸°ë°˜ ì˜ì‚¬ê²°ì • ë¬¸í™”ë¥¼ ì •ì°©ì‹œí‚¨ ê²ƒì…ë‹ˆë‹¤. ì…ì‚¬ ì´ˆê¸° íŒ€ì€ ëŒ€ë¶€ë¶„ ì§ê´€ê³¼ ê²½í—˜ì— ì˜ì¡´í•˜ì—¬ ê²°ì •ì„ ë‚´ë ¸ê³ , ë°ì´í„°ëŠ” ì‚¬í›„ ë³´ê³ ìš©ìœ¼ë¡œë§Œ ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤. ì €ëŠ” ë¨¼ì € SQL ê¸°ì´ˆ êµìœ¡ ì„¸ì…˜ì„ ë§¤ì£¼ 30ë¶„ì”© ìš´ì˜í•˜ë©° íŒ€ì›ë“¤ì´ ì§ì ‘ ë°ì´í„°ë¥¼ ë³¼ ìˆ˜ ìˆë„ë¡ ë„ì™”ìŠµë‹ˆë‹¤. ë˜í•œ ìì£¼ ì‚¬ìš©í•˜ëŠ” ë¶„ì„ ì¿¼ë¦¬ë¥¼ í…œí”Œë¦¿í™”í•˜ì—¬ ê³µìœ  ë¬¸ì„œë¡œ ë§Œë“¤ì—ˆê³ , Slackì— ì¼ì¼ í•µì‹¬ ì§€í‘œ ì•Œë¦¼ë´‡ì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤. 3ê°œì›” í›„ íŒ€ì›ë“¤ì€ íšŒì˜ì—ì„œ "ë°ì´í„°ë¥¼ ë³´ë‹ˆ..." ë¼ëŠ” ë§ì„ ìì—°ìŠ¤ëŸ½ê²Œ í•˜ê¸° ì‹œì‘í–ˆê³ , ì˜ì‚¬ê²°ì • ì†ë„ê°€ ë¹¨ë¼ì¡ŒìŠµë‹ˆë‹¤. ë†€ëê²Œë„ ë””ìì´ë„ˆì™€ ë§ˆì¼€í„°ë“¤ë„ ìŠ¤ìŠ¤ë¡œ A/B í…ŒìŠ¤íŠ¸ë¥¼ ì„¤ê³„í•˜ê³  ë¶„ì„í•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ì´ëŸ° ë¬¸í™” ë³€í™”ê°€ ì œí’ˆ ì„±ê³¼ í–¥ìƒìœ¼ë¡œ ì´ì–´ì¡Œê³ , ì „ì‚¬ì ìœ¼ë¡œ ë²¤ì¹˜ë§ˆí¬ ì‚¬ë¡€ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. ê°œì¸ì ìœ¼ë¡œëŠ” ì´ëŸ° "ì‹œìŠ¤í…œì„ ë§Œë“œëŠ” ì¼"ì´ ë‹¨ìˆœíˆ ì œí’ˆ í•˜ë‚˜ë¥¼ ë§Œë“œëŠ” ê²ƒë³´ë‹¤ ë” í° ë ˆë²„ë¦¬ì§€ë¥¼ ë§Œë“ ë‹¤ê³  ë¯¿ìŠµë‹ˆë‹¤.`,

  "expertise_3": `ì œê°€ ê°€ì¥ ì–´ë ¤ì› ë˜ ë¬¸ì œëŠ” ë ˆê±°ì‹œ ì‹œìŠ¤í…œ ë§ˆì´ê·¸ë ˆì´ì…˜ í”„ë¡œì íŠ¸ì˜€ìŠµë‹ˆë‹¤. 5ë…„ ëœ ëª¨ë†€ë¦¬ì‹ êµ¬ì¡°ë¥¼ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ ì „í™˜í•´ì•¼ í–ˆëŠ”ë°, ì„œë¹„ìŠ¤ ì¤‘ë‹¨ ì—†ì´ ì§„í–‰í•´ì•¼ í•œë‹¤ëŠ” ì œì•½ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ê¸°ìˆ ì  ë³µì¡ë„ë„ ë†’ì•˜ì§€ë§Œ, ë” í° ë¬¸ì œëŠ” ì´í•´ê´€ê³„ìë“¤ì˜ ìš°ì„ ìˆœìœ„ê°€ ë‹¤ ë‹¬ëë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ê°œë°œíŒ€ì€ ê¸°ìˆ  ë¶€ì±„ í•´ì†Œë¥¼, ì˜ì—…íŒ€ì€ ì‹ ê·œ ê¸°ëŠ¥ ê°œë°œì„, ê²½ì˜ì§„ì€ ë¹„ìš© ì ˆê°ì„ ì›í–ˆìŠµë‹ˆë‹¤. ì €ëŠ” ë¨¼ì € ëª¨ë“  ì´í•´ê´€ê³„ìì™€ 1:1 ë¯¸íŒ…ì„ í†µí•´ ê°ìì˜ ëª©í‘œë¥¼ ì •ë¦¬í–ˆê³ , ë§ˆì´ê·¸ë ˆì´ì…˜ì„ 4ë‹¨ê³„ë¡œ ë‚˜ëˆ„ì–´ ê° ë‹¨ê³„ë§ˆë‹¤ ëª¨ë‘ì—ê²Œ ê°€ì¹˜ë¥¼ ì¤„ ìˆ˜ ìˆë„ë¡ ê³„íšì„ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ 1ë‹¨ê³„ì—ì„œëŠ” ê°€ì¥ íŠ¸ë˜í”½ì´ ë§ì€ APIë¥¼ ë¶„ë¦¬í•˜ì—¬ ì„±ëŠ¥ ê°œì„  íš¨ê³¼ë¥¼ ë¹ ë¥´ê²Œ ë³´ì—¬ì£¼ê³ , 2ë‹¨ê³„ì—ì„œëŠ” ì‹ ê·œ ê¸°ëŠ¥ ê°œë°œ ì†ë„ë¥¼ ë†’ì¼ ìˆ˜ ìˆëŠ” êµ¬ì¡°ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. 6ê°œì›”ê°„ ë§¤ì£¼ ì§„í–‰ìƒí™©ì„ íˆ¬ëª…í•˜ê²Œ ê³µìœ í•˜ë©° ì‹ ë¢°ë¥¼ ìŒ“ì•˜ê³ , ê²°ê³¼ì ìœ¼ë¡œ ë‹¤ìš´íƒ€ì„ 0ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. ì´ ê²½í—˜ì„ í†µí•´ ë³µì¡í•œ í”„ë¡œì íŠ¸ëŠ” ê¸°ìˆ ë§Œì´ ì•„ë‹ˆë¼ ì‚¬ëŒê³¼ ì •ì¹˜ë¥¼ ê´€ë¦¬í•˜ëŠ” ëŠ¥ë ¥ì´ ë” ì¤‘ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ë°°ì› ìŠµë‹ˆë‹¤.`,

  "expertise_4": `ì œê°€ ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ì°¨ë³„í™”ë˜ëŠ” ê°•ì ì€ ë³µì¡í•œ ê¸°ìˆ ì„ ë¹„ì „ë¬¸ê°€ë„ ì´í•´í•  ìˆ˜ ìˆê²Œ ì„¤ëª…í•˜ëŠ” ëŠ¥ë ¥ì…ë‹ˆë‹¤. í•œë²ˆì€ ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ì¶”ì²œ ì‹œìŠ¤í…œì„ ë„ì…í•˜ëŠ” í”„ë¡œì íŠ¸ì—ì„œ, CEOì™€ ë§ˆì¼€íŒ… íŒ€ì—ê²Œ ê¸°ìˆ ì  ê°€ì¹˜ë¥¼ ì„¤ëª…í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. ë‹¨ìˆœíˆ "ì•Œê³ ë¦¬ì¦˜ì´ ì¢‹ì•„ìš”"ë¼ê³  ë§í•˜ëŠ” ëŒ€ì‹ , ì‹¤ì œ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ë§Œë“¤ì–´ "í˜„ì¬ëŠ” ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ì œí’ˆì„ ì°¾ê¸° ìœ„í•´ í‰ê·  5ë²ˆ í´ë¦­í•´ì•¼ í•˜ì§€ë§Œ, ì¶”ì²œ ì‹œìŠ¤í…œ ë„ì… í›„ì—ëŠ” ì²« í™”ë©´ì—ì„œ ë°”ë¡œ ì°¾ì„ í™•ë¥ ì´ 60%ì…ë‹ˆë‹¤. ì´ëŠ” êµ¬ë§¤ ì „í™˜ìœ¨ì„ 15% í–¥ìƒì‹œí‚¬ ê²ƒìœ¼ë¡œ ì˜ˆìƒë©ë‹ˆë‹¤"ë¼ê³  ë¹„ì¦ˆë‹ˆìŠ¤ ì„íŒ©íŠ¸ë¡œ ë²ˆì—­í–ˆìŠµë‹ˆë‹¤. ë˜í•œ ê°„ë‹¨í•œ í”„ë¡œí† íƒ€ì… ë°ëª¨ë¥¼ ë§Œë“¤ì–´ ì§ì ‘ ì²´í—˜í•˜ê²Œ í–ˆìŠµë‹ˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ íˆ¬ì ìŠ¹ì¸ì„ ë°›ì•˜ê³ , ì‹¤ì œ ì¶œì‹œ í›„ ì˜ˆìƒí–ˆë˜ ê²ƒë³´ë‹¤ ë” ì¢‹ì€ ì„±ê³¼ë¥¼ ê±°ë‘ì—ˆìŠµë‹ˆë‹¤. ì €ëŠ” PMì˜ ì—­í• ì´ ë‹¨ìˆœíˆ ì œí’ˆì„ ë§Œë“œëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ê¸°ìˆ -ë¹„ì¦ˆë‹ˆìŠ¤-ì‚¬ìš©ìë¥¼ ì—°ê²°í•˜ëŠ” ë²ˆì—­ê°€ì´ì ì¤‘ì¬ìë¼ê³  ìƒê°í•©ë‹ˆë‹¤.`,

  "edge_1": `ì œê°€ ì •ë§ ìì‹  ìˆëŠ” ê²ƒì€ 'ë°ì´í„° ê¸°ë°˜ ìŠ¤í† ë¦¬í…”ë§'ì…ë‹ˆë‹¤. ë§ì€ ì‚¬ëŒë“¤ì´ ë°ì´í„°ë¥¼ ì˜ ë¶„ì„í•˜ì§€ë§Œ, ê·¸ê²ƒì„ ì„¤ë“ë ¥ ìˆëŠ” ì´ì•¼ê¸°ë¡œ ë§Œë“œëŠ” ê²ƒì€ ë‹¤ë¥¸ ë¬¸ì œì…ë‹ˆë‹¤. ì €ëŠ” ìˆ«ì ë’¤ì— ìˆ¨ê²¨ì§„ ì‚¬ìš©ìì˜ í–‰ë™ê³¼ ê°ì •ì„ ì½ì–´ë‚´ê³ , ê·¸ê²ƒì„ ê²½ì˜ì§„ê³¼ íŒ€ì›ë“¤ì´ ê³µê°í•  ìˆ˜ ìˆëŠ” ë‚´ëŸ¬í‹°ë¸Œë¡œ ë§Œë“œëŠ” ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë‹¨ìˆœíˆ "ì´íƒˆë¥ ì´ 30%ì…ë‹ˆë‹¤"ê°€ ì•„ë‹ˆë¼, "ì‹ ê·œ ì‚¬ìš©ì 100ëª… ì¤‘ 30ëª…ì´ ì²« ì£¼ì— ë– ë‚˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë“¤ì˜ í–‰ë™ íŒ¨í„´ì„ ë¶„ì„í•œ ê²°ê³¼, ëŒ€ë¶€ë¶„ ì˜¨ë³´ë”© 3ë‹¨ê³„ì—ì„œ ë§‰íˆê³  ìˆì—ˆìŠµë‹ˆë‹¤. ì´ ë¶€ë¶„ì„ ê°œì„ í•˜ë©´ ì›” 1,500ëª…ì˜ ì‚¬ìš©ìë¥¼ ë” í™•ë³´í•  ìˆ˜ ìˆê³ , ì´ëŠ” ì—° 1ì–µì›ì˜ ì¶”ê°€ ë§¤ì¶œë¡œ ì´ì–´ì§‘ë‹ˆë‹¤"ë¼ê³  ë§í•©ë‹ˆë‹¤. ì´ëŸ° ì ‘ê·¼ ë•ë¶„ì— ì œ ì œì•ˆì€ ê±°ì˜ í•­ìƒ ìŠ¹ì¸ë˜ì—ˆê³ , íŒ€ì›ë“¤ë„ ì €ì˜ ë¶„ì„ì„ ì‹ ë¢°í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì•ìœ¼ë¡œë„ ì´ ê°•ì ì„ ë”ìš± ë°œì „ì‹œì¼œ, ë°ì´í„°ë¡œ ì¡°ì§ì„ ì›€ì§ì´ëŠ” ë¦¬ë”ê°€ ë˜ê³  ì‹¶ìŠµë‹ˆë‹¤.`,

  "edge_2": `5ë…„ í›„ ì €ëŠ” 'AI ì‹œëŒ€ì˜ í”„ë¡œë•íŠ¸ ì „ëµ ì „ë¬¸ê°€'ë¡œ ìë¦¬ë§¤ê¹€í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤. ë‹¨ìˆœíˆ ì œí’ˆì„ ë§Œë“œëŠ” PMì´ ì•„ë‹ˆë¼, AIì™€ ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ ì‚¬ìš©ì ê²½í—˜ì„ í˜ì‹ í•˜ê³  ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸ì„ ì¬ì •ì˜í•˜ëŠ” ì „ëµê°€ê°€ ë˜ê³  ì‹¶ìŠµë‹ˆë‹¤. êµ¬ì²´ì ìœ¼ë¡œëŠ” ì²«ì§¸, AI ë„¤ì´í‹°ë¸Œ ì œí’ˆì„ 3ê°œ ì´ìƒ ì„±ê³µì ìœ¼ë¡œ ë¡ ì¹­í•˜ê³  ì¼€ì´ìŠ¤ ìŠ¤í„°ë””ë¥¼ ë§Œë“¤ê³  ì‹¶ìŠµë‹ˆë‹¤. ë‘˜ì§¸, ì œ ê²½í—˜ê³¼ ì¸ì‚¬ì´íŠ¸ë¥¼ ê³µìœ í•˜ë©° ë‹¤ìŒ ì„¸ëŒ€ PMë“¤ì„ ë©˜í† ë§í•˜ëŠ” ì—­í• ì„ í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤. ì´ë¯¸ ë¸”ë¡œê·¸ì™€ ê°•ì—°ì„ ì‹œì‘í–ˆê³ , ì•ìœ¼ë¡œ ì±…ì„ ì¶œê°„í•  ê³„íšë„ ìˆìŠµë‹ˆë‹¤. ì…‹ì§¸, í”„ë¡œë•íŠ¸ì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ì „ëµì„ ì•„ìš°ë¥´ëŠ” ë¦¬ë”ì‹­ì„ ë°œì „ì‹œì¼œ, CPO(Chief Product Officer) ë˜ëŠ” ìŠ¤íƒ€íŠ¸ì—… ê³µë™ì°½ì—…ìë¡œì„œ ì¡°ì§ ì „ì²´ì˜ ì œí’ˆ ë¹„ì „ì„ ì„¤ê³„í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤. ë¬´ì—‡ë³´ë‹¤ 'ì´ ì‚¬ëŒì´ ë§Œë“  ì œí’ˆì€ ë‹¤ë¥´ë‹¤'ëŠ” í‰íŒì„ ì–»ê³  ì‹¶ìŠµë‹ˆë‹¤. ì‚¬ìš©ìë“¤ì´ ì§„ì§œ ì‚¬ë‘í•˜ê³ , íŒ€ì›ë“¤ì´ í•¨ê»˜ ì¼í•˜ê³  ì‹¶ì–´í•˜ê³ , ì—…ê³„ê°€ ë²¤ì¹˜ë§ˆí¬í•˜ëŠ” ì œí’ˆì„ ë§Œë“œëŠ” ê²ƒ. ê·¸ê²ƒì´ ì œ ê¶ê·¹ì ì¸ ë¸Œëœë“œ ëª©í‘œì…ë‹ˆë‹¤.`
};

async function runFullWorkflow() {
  console.log('ğŸš€ ì „ì²´ ì›Œí¬í”Œë¡œìš° ìë™ í…ŒìŠ¤íŠ¸ ì‹œì‘\n');
  console.log(`ğŸ“§ í…ŒìŠ¤íŠ¸ ì´ë©”ì¼: ${TEST_EMAIL}\n`);

  let sessionId: string;

  try {
    // Step 1: ì„¸ì…˜ ìƒì„±
    console.log('1ï¸âƒ£  ì„¸ì…˜ ìƒì„± ì¤‘...');
    const sessionRes = await fetch(`${BASE_URL}/api/session`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email: TEST_EMAIL })
    });
    const sessionData = await sessionRes.json();
    sessionId = sessionData.session.id;
    console.log(`   âœ… ì„¸ì…˜ ìƒì„± ì™„ë£Œ: ${sessionId}\n`);

    // Step 2: PSA ì„¤ë¬¸ ë‹µë³€ ì œì¶œ
    console.log('2ï¸âƒ£  PSA ì„¤ë¬¸ ë‹µë³€ ì œì¶œ ì¤‘...');
    const psaAnswers = generatePSAAnswers();
    const surveyRes = await fetch(`${BASE_URL}/api/survey/submit`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ sessionId, answers: psaAnswers })
    });
    const surveyResult = await surveyRes.json();
    console.log(`   âœ… ì„¤ë¬¸ ì œì¶œ ì™„ë£Œ (60ë¬¸í•­)\n`);

    // Step 3: PSA ë¶„ì„ ì‹¤í–‰
    console.log('3ï¸âƒ£  PSA ë¶„ì„ ì¤‘...');
    const analyzeRes = await fetch(`${BASE_URL}/api/survey/analyze`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ sessionId })
    });
    const analyzeResult = await analyzeRes.json();
    console.log(`   âœ… PSA ë¶„ì„ ì™„ë£Œ`);
    console.log(`   ğŸ“Š í˜ë¥´ì†Œë‚˜: ${analyzeResult.data?.persona?.title || 'ì•Œ ìˆ˜ ì—†ìŒ'}\n`);

    // Step 4: ì´ë ¥ì„œ ì—…ë¡œë“œ
    console.log('4ï¸âƒ£  ì´ë ¥ì„œ ì—…ë¡œë“œ ì¤‘...');
    const resumePath = path.join(process.cwd(), 'resume_sample.docx');

    if (!fs.existsSync(resumePath)) {
      throw new Error('resume_sample.docx íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');
    }

    const resumeForm = new FormData();
    resumeForm.append('file', fs.createReadStream(resumePath));
    resumeForm.append('sessionId', sessionId);
    resumeForm.append('fileType', 'resume');

    const uploadRes = await fetch(`${BASE_URL}/api/upload`, {
      method: 'POST',
      body: resumeForm as any,
    });
    const uploadResult = await uploadRes.json();
    console.log(`   âœ… ì´ë ¥ì„œ ì—…ë¡œë“œ ì™„ë£Œ\n`);

    // Step 5: Enhanced Questions ìƒì„±
    console.log('5ï¸âƒ£  Enhanced Questions ìƒì„± ì¤‘...');
    const questionsRes = await fetch(`${BASE_URL}/api/questions/generate`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ sessionId })
    });
    const questionsResult = await questionsRes.json();
    console.log(`   âœ… ì§ˆë¬¸ ìƒì„± ì™„ë£Œ (${questionsResult.data?.questions?.length || 0}ê°œ)\n`);

    // Step 6: Enhanced Questions ë‹µë³€ ì œì¶œ
    console.log('6ï¸âƒ£  Enhanced Questions ë‹µë³€ ì œì¶œ ì¤‘...');
    const answersRes = await fetch(`${BASE_URL}/api/questions`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        sessionId,
        questions: questionsResult.data?.questions || [],
        answers: enhancedQuestions
      })
    });
    const answersResult = await answersRes.json();
    console.log(`   âœ… ë‹µë³€ ì œì¶œ ì™„ë£Œ (ê° ë‹µë³€ 500ì ì´ìƒ)\n`);

    // Step 7: ì •ì‹ ë¦¬í¬íŠ¸ ìƒì„±
    console.log('7ï¸âƒ£  ì •ì‹ ë¦¬í¬íŠ¸ ìƒì„± ì‹œì‘...');
    console.log('   â³ ì˜ˆìƒ ì†Œìš” ì‹œê°„: 10-15ì´ˆ (ì´ì „ ëŒ€ë¹„ 50% ì¦ê°€)\n');

    const startTime = Date.now();
    const generateRes = await fetch(`${BASE_URL}/api/generate`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ sessionId })
    });
    const generateResult = await generateRes.json();
    const elapsed = ((Date.now() - startTime) / 1000).toFixed(1);

    if (generateResult.data?.reportId) {
      console.log(`   âœ… ë¦¬í¬íŠ¸ ìƒì„± ì™„ë£Œ! (ì†Œìš” ì‹œê°„: ${elapsed}ì´ˆ)`);
      console.log(`   ğŸ“„ Report ID: ${generateResult.data.reportId}\n`);
    } else {
      throw new Error('ë¦¬í¬íŠ¸ ìƒì„± ì‹¤íŒ¨: ' + (generateResult.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'));
    }

    // Step 8: ê²°ê³¼ ì¡°íšŒ
    console.log('8ï¸âƒ£  ìµœì¢… ê²°ê³¼ ì¡°íšŒ ì¤‘...');
    const resultRes = await fetch(`${BASE_URL}/api/results?sessionId=${sessionId}`);
    const resultData = await resultRes.json();

    console.log('\n' + '='.repeat(60));
    console.log('ğŸ‰ ì „ì²´ ì›Œí¬í”Œë¡œìš° ì™„ë£Œ!\n');

    console.log('ğŸ“Š ìƒì„±ëœ íŒŒì¼:');
    console.log(`   â€¢ í…ìŠ¤íŠ¸ PDF: ${resultData.data?.textPdfUrl ? 'âœ…' : 'âŒ'}`);
    console.log(`   â€¢ ìŠ¬ë¼ì´ë“œ PDF: ${resultData.data?.slidesPdfUrl ? 'âœ…' : 'âŒ'}`);
    console.log(`   â€¢ PPTX íŒŒì¼: ${resultData.data?.pptxUrl ? 'âœ…' : 'âŒ'}`);

    console.log('\nğŸ”— ê²°ê³¼ í™•ì¸:');
    console.log(`   ${BASE_URL}/result?sessionId=${sessionId}`);

    if (resultData.data?.textPdfUrl) {
      console.log(`\nğŸ“¥ ë‹¤ìš´ë¡œë“œ ë§í¬:`);
      console.log(`   í…ìŠ¤íŠ¸ PDF: ${resultData.data.textPdfUrl}`);
      console.log(`   ìŠ¬ë¼ì´ë“œ PDF: ${resultData.data.slidesPdfUrl}`);
      console.log(`   PPTX: ${resultData.data.pptxUrl}`);
    }

    console.log('\n' + '='.repeat(60));
    console.log('\nğŸ’¡ ë‹¤ìŒ ë‹¨ê³„:');
    console.log('   1. ë¸Œë¼ìš°ì €ì—ì„œ ê²°ê³¼ í˜ì´ì§€ë¥¼ ì—´ì–´ë³´ì„¸ìš”');
    console.log('   2. PDFë¥¼ ë‹¤ìš´ë¡œë“œí•˜ì—¬ ë‚´ìš©ì„ í™•ì¸í•˜ì„¸ìš”');
    console.log('   3. íŠ¹íˆ ë‹¤ìŒ ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”:');
    console.log('      - Brand Storyê°€ 800ì ì´ìƒì¸ê°€?');
    console.log('      - Strengthsê°€ 5-7ê°œì¸ê°€?');
    console.log('      - Achievementsê°€ 5-8ê°œì¸ê°€?');
    console.log('      - Enhanced Questions ë‹µë³€ì´ ìŠ¤í† ë¦¬ì— ë…¹ì•„ìˆëŠ”ê°€?\n');

    return {
      success: true,
      sessionId,
      urls: {
        result: `${BASE_URL}/result?sessionId=${sessionId}`,
        textPdf: resultData.data?.textPdfUrl,
        slidesPdf: resultData.data?.slidesPdfUrl,
        pptx: resultData.data?.pptxUrl
      }
    };

  } catch (error: any) {
    console.error('\nâŒ ì—ëŸ¬ ë°œìƒ:', error.message);
    console.error(error.stack);
    return {
      success: false,
      error: error.message
    };
  }
}

// ì‹¤í–‰
runFullWorkflow()
  .then((result) => {
    if (result.success) {
      console.log('âœ… í…ŒìŠ¤íŠ¸ ì„±ê³µ!');
      process.exit(0);
    } else {
      console.error('âŒ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨!');
      process.exit(1);
    }
  })
  .catch((error) => {
    console.error('âŒ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜:', error);
    process.exit(1);
  });
